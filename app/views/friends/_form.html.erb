<link href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<link rel="stylesheet" href="application.css">
<!------ Include the above in your HEAD tag ---------->
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.8/css/all.css">
<%= form_with(model: friend ) do |form| %>
<%= include_gon %>

 <% if friend.errors.any? %>
    <div style="color: red">
      <h2><%= pluralize(friend.errors.count, "error") %> Некоррктный ввод данных:</h2>
      <ul>
        <% friend.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %> 

  <div class="form-group input-group">
    <div class="input-group-prepend">
      <span class="input-group-text"> <i class="fa fa-user"></i> </span>
    </div>
    <%= form.text_field :first_name,class:"form-control",placeholder:"Имя" %>
  </div>
  <div class="form-group input-group">
    <div class="input-group-prepend">
      <span class="input-group-text"> <i class="fa fa-user"></i> </span>
    </div>
    <%= form.text_field :last_name ,class:"form-control",placeholder:"Фамилия" %>
  </div>
  <div class="form-group input-group">
    <div class="input-group-prepend">
      <span class="input-group-text"> <i class="fa fa-envelope"></i> </span>
    </div>
    <%= form.email_field :email ,class:"form-control",placeholder:"Электронная почта" , value:current_user.email %>
  </div>
  <div class="form-group input-group">
    <div class="input-group-prepend">
      <span class="input-group-text"> <i class="fa fa-phone"></i> </span>
    </div>
    <%= form.text_field :phone,class:"form-control",placeholder:"Телефон" %>
  </div>



  Дата бронирования
  <div class="center-date">
  C <%= form.date_field :start_date,class: 'form-control' ,min: Date.today ,id:"q1"%>
  По <%= form.date_field :end_date ,class: 'form-control',min: Date.today ,id:"q2"%>
  </div>


<div> 
<br>


 <br>
 
<input type="checkbox" id="check" name="Питание" checked> Питание - 20руб/сутки
<br>
<input type="checkbox" id="check1" name="Питание" checked> Уборка номера - 22руб


<script>
function myFunction()
{
  var date_1 = new Date(document.getElementById('q1').value);
  var date_2 = new Date(document.getElementById('q2').value);
  var val = (date_2-date_1)/864e5;
  var element = document.querySelector('#check');  
  var element1 = document.querySelector('#check1');  
  q3 = gon.we*val; 
  if (element.checked && element1.checked) {
      alert(q3 + (val*10) + 22);
  }
  else if (!element.checked && element1.checked) {
     alert(q3 + 22);
    
  }
  else if (element.checked && !element1.checked) {
     alert(q3 + (val*10));
  }
  else
  {
    alert(gon.we*val);
  }   
  
}
</script>


</div>


  <div>
    <%= form.number_field :user_id, id: :friend_user_id, value:current_user.id, type: :hidden %>
  </div>
  
 <div>
  <%= form.number_field :room_id, value:$q1,type: :hidden %>
</div>

  <br>
  <div class="form-group">
    <%= form.submit "Забронировать",class:"btn btn-primary btn-block"%>
  </div>

  <input type = "button" value="рассчитать стоимость" onclick="myFunction()">
<% end %>
